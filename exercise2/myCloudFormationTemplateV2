{
    "Metadata": {
        "AWS::CloudFormation::Designer": {
            "f98b2cb4-efa5-4af9-882e-359787f155a3": {
                "size": {
                    "width": 1460,
                    "height": 520
                },
                "position": {
                    "x": 340,
                    "y": 1270
                },
                "z": 1,
                "embeds": [
                    "5c719f22-025f-4205-bcd8-ad4fa4950f7d",
                    "f5e3fefc-d6ba-47a2-abd3-44bb80885128",
                    "594a4af0-69dc-4101-bc58-3d0d4dc68a0b",
                    "efb6f2b9-dd3d-4e4c-bfe6-a4c2a799c2fa",
                    "92dc42b2-f272-4b4b-8350-3a80f7c4c22f",
                    "2cb6ece9-f72f-4532-b2a5-85a77e9c530f",
                    "9691a5d7-645a-4bb4-85d8-df7e8f3d4667",
                    "4918e21e-5c92-4a06-901c-57adc5788726",
                    "de1fad30-ae96-4261-b71e-0d5b1eec7e7a"
                ]
            },
            "9691a5d7-645a-4bb4-85d8-df7e8f3d4667": {
                "size": {
                    "width": 500,
                    "height": 360
                },
                "position": {
                    "x": 430,
                    "y": 1350
                },
                "z": 2,
                "parent": "f98b2cb4-efa5-4af9-882e-359787f155a3",
                "embeds": [
                    "4734cb2b-fbbb-4d32-a4fe-27fbe3f6fe2d",
                    "40c46d66-28b2-48ec-843f-95737bcd6d1c",
                    "cca4257e-497b-4ef5-a4a9-64ae14a0e12d",
                    "e5d92f07-fc3b-4cfa-b32c-eaa8777b82c0",
                    "8eb68b0e-fde1-4350-b64c-9ec350104125",
                    "c48020e8-fb7b-4865-b954-14b433c480b7",
                    "1548ec77-1f03-48dd-96d7-a2b435ae350f"
                ]
            },
            "1548ec77-1f03-48dd-96d7-a2b435ae350f": {
                "size": {
                    "width": 60,
                    "height": 60
                },
                "position": {
                    "x": 520,
                    "y": 1590
                },
                "z": 3,
                "parent": "9691a5d7-645a-4bb4-85d8-df7e8f3d4667",
                "embeds": [],
                "isconnectedto": [
                    "de1fad30-ae96-4261-b71e-0d5b1eec7e7a",
                    "9691a5d7-645a-4bb4-85d8-df7e8f3d4667"
                ],
                "isassociatedwith": [
                    "cca4257e-497b-4ef5-a4a9-64ae14a0e12d"
                ]
            },
            "cca4257e-497b-4ef5-a4a9-64ae14a0e12d": {
                "size": {
                    "width": 60,
                    "height": 60
                },
                "position": {
                    "x": 700,
                    "y": 1590
                },
                "z": 3,
                "parent": "9691a5d7-645a-4bb4-85d8-df7e8f3d4667",
                "embeds": []
            },
            "8f019711-7932-496e-a187-6a39332293b1": {
                "source": {
                    "id": "1548ec77-1f03-48dd-96d7-a2b435ae350f"
                },
                "target": {
                    "id": "cca4257e-497b-4ef5-a4a9-64ae14a0e12d"
                },
                "z": 3
            },
            "c48020e8-fb7b-4865-b954-14b433c480b7": {
                "size": {
                    "width": 60,
                    "height": 60
                },
                "position": {
                    "x": 520,
                    "y": 1490
                },
                "z": 3,
                "parent": "9691a5d7-645a-4bb4-85d8-df7e8f3d4667",
                "embeds": [],
                "isconnectedto": [
                    "4918e21e-5c92-4a06-901c-57adc5788726",
                    "9691a5d7-645a-4bb4-85d8-df7e8f3d4667"
                ],
                "isassociatedwith": [
                    "40c46d66-28b2-48ec-843f-95737bcd6d1c"
                ]
            },
            "40c46d66-28b2-48ec-843f-95737bcd6d1c": {
                "size": {
                    "width": 60,
                    "height": 60
                },
                "position": {
                    "x": 700,
                    "y": 1490
                },
                "z": 3,
                "parent": "9691a5d7-645a-4bb4-85d8-df7e8f3d4667",
                "embeds": []
            },
            "cc04e533-1e78-4202-9911-ececb951802f": {
                "source": {
                    "id": "c48020e8-fb7b-4865-b954-14b433c480b7"
                },
                "target": {
                    "id": "40c46d66-28b2-48ec-843f-95737bcd6d1c"
                },
                "z": 3
            },
            "de1fad30-ae96-4261-b71e-0d5b1eec7e7a": {
                "size": {
                    "width": 60,
                    "height": 60
                },
                "position": {
                    "x": 350,
                    "y": 1590
                },
                "z": 2,
                "parent": "f98b2cb4-efa5-4af9-882e-359787f155a3",
                "embeds": [],
                "isconnectedto": [
                    "9691a5d7-645a-4bb4-85d8-df7e8f3d4667"
                ],
                "isrelatedto": [
                    "9691a5d7-645a-4bb4-85d8-df7e8f3d4667"
                ]
            },
            "4918e21e-5c92-4a06-901c-57adc5788726": {
                "size": {
                    "width": 60,
                    "height": 60
                },
                "position": {
                    "x": 350,
                    "y": 1490
                },
                "z": 2,
                "parent": "f98b2cb4-efa5-4af9-882e-359787f155a3",
                "embeds": [],
                "isconnectedto": [
                    "9691a5d7-645a-4bb4-85d8-df7e8f3d4667"
                ],
                "isrelatedto": [
                    "9691a5d7-645a-4bb4-85d8-df7e8f3d4667"
                ]
            },
            "a1763c83-9779-441d-b147-d63980cb3f5c": {
                "source": {
                    "id": "c48020e8-fb7b-4865-b954-14b433c480b7"
                },
                "target": {
                    "id": "4918e21e-5c92-4a06-901c-57adc5788726"
                },
                "z": 3
            },
            "a14b71df-6f2e-43a0-9466-0b3e61a786b4": {
                "source": {
                    "id": "1548ec77-1f03-48dd-96d7-a2b435ae350f"
                },
                "target": {
                    "id": "de1fad30-ae96-4261-b71e-0d5b1eec7e7a"
                },
                "z": 4
            },
            "b1606ebc-eba0-4181-8b73-2d7190f9f44d": {
                "source": {
                    "id": "e5d78b3b-f8d5-4cb1-93eb-824ec1dcfa38"
                },
                "target": {
                    "id": "4e2d323d-6f57-4069-adea-d5facb0c9a63"
                },
                "z": 5
            },
            "5c719f22-025f-4205-bcd8-ad4fa4950f7d": {
                "size": {
                    "width": 60,
                    "height": 60
                },
                "position": {
                    "x": 1570,
                    "y": 1690
                },
                "z": 2,
                "parent": "f98b2cb4-efa5-4af9-882e-359787f155a3",
                "embeds": []
            },
            "2cb6ece9-f72f-4532-b2a5-85a77e9c530f": {
                "size": {
                    "width": 280,
                    "height": 240
                },
                "position": {
                    "x": 1050,
                    "y": 1330
                },
                "z": 2,
                "parent": "f98b2cb4-efa5-4af9-882e-359787f155a3",
                "embeds": [
                    "fd4c10d1-0c09-43d5-a5d8-79ecb5371fb6"
                ],
                "isconnectedto": [
                    "92dc42b2-f272-4b4b-8350-3a80f7c4c22f",
                    "efb6f2b9-dd3d-4e4c-bfe6-a4c2a799c2fa"
                ],
                "isrelatedto": [
                    "f98b2cb4-efa5-4af9-882e-359787f155a3",
                    "9691a5d7-645a-4bb4-85d8-df7e8f3d4667"
                ]
            },
            "fd4c10d1-0c09-43d5-a5d8-79ecb5371fb6": {
                "size": {
                    "width": 60,
                    "height": 60
                },
                "position": {
                    "x": 1150,
                    "y": 1420
                },
                "z": 3,
                "parent": "2cb6ece9-f72f-4532-b2a5-85a77e9c530f",
                "embeds": [],
                "ismemberof": [
                    "594a4af0-69dc-4101-bc58-3d0d4dc68a0b"
                ]
            },
            "594a4af0-69dc-4101-bc58-3d0d4dc68a0b": {
                "size": {
                    "width": 60,
                    "height": 60
                },
                "position": {
                    "x": 1150,
                    "y": 1150
                },
                "z": 0,
                "parent": "f98b2cb4-efa5-4af9-882e-359787f155a3",
                "embeds": []
            },
            "439b3761-a109-491a-8442-48c81f7a3ea6": {
                "source": {
                    "id": "fd4c10d1-0c09-43d5-a5d8-79ecb5371fb6"
                },
                "target": {
                    "id": "594a4af0-69dc-4101-bc58-3d0d4dc68a0b"
                },
                "z": 3
            },
            "8eb68b0e-fde1-4350-b64c-9ec350104125": {
                "size": {
                    "width": 60,
                    "height": 60
                },
                "position": {
                    "x": 520,
                    "y": 1400
                },
                "z": 3,
                "parent": "9691a5d7-645a-4bb4-85d8-df7e8f3d4667",
                "embeds": [],
                "isrelatedto": [
                    "e5d92f07-fc3b-4cfa-b32c-eaa8777b82c0"
                ]
            },
            "e5d92f07-fc3b-4cfa-b32c-eaa8777b82c0": {
                "size": {
                    "width": 60,
                    "height": 60
                },
                "position": {
                    "x": 700,
                    "y": 1400
                },
                "z": 3,
                "parent": "9691a5d7-645a-4bb4-85d8-df7e8f3d4667",
                "embeds": [],
                "dependson": [
                    "f98b2cb4-efa5-4af9-882e-359787f155a3"
                ]
            },
            "4b5fb1a9-1276-413d-b9b6-6375d435b3ae": {
                "size": {
                    "width": 60,
                    "height": 60
                },
                "position": {
                    "x": 190,
                    "y": 1400
                },
                "z": 0,
                "parent": "f5e3fefc-d6ba-47a2-abd3-44bb80885128",
                "embeds": [],
                "isrelatedto": [
                    "8eb68b0e-fde1-4350-b64c-9ec350104125"
                ]
            },
            "aa80b530-e30c-4f8e-9bf7-d532c40328ad": {
                "source": {
                    "id": "8eb68b0e-fde1-4350-b64c-9ec350104125"
                },
                "target": {
                    "id": "e5d92f07-fc3b-4cfa-b32c-eaa8777b82c0"
                },
                "z": 3
            },
            "f5e3fefc-d6ba-47a2-abd3-44bb80885128": {
                "size": {
                    "width": 330,
                    "height": 290
                },
                "position": {
                    "x": 1420,
                    "y": 1350
                },
                "z": 0,
                "parent": "f98b2cb4-efa5-4af9-882e-359787f155a3",
                "embeds": [
                    "4b5fb1a9-1276-413d-b9b6-6375d435b3ae"
                ]
            },
            "4734cb2b-fbbb-4d32-a4fe-27fbe3f6fe2d": {
                "size": {
                    "width": 60,
                    "height": 60
                },
                "position": {
                    "x": 800,
                    "y": 1590
                },
                "z": 3,
                "parent": "9691a5d7-645a-4bb4-85d8-df7e8f3d4667",
                "embeds": []
            },
            "efb6f2b9-dd3d-4e4c-bfe6-a4c2a799c2fa": {
                "size": {
                    "width": 150,
                    "height": 150
                },
                "position": {
                    "x": 1280,
                    "y": 1610
                },
                "z": 2,
                "parent": "f98b2cb4-efa5-4af9-882e-359787f155a3",
                "embeds": []
            },
            "92dc42b2-f272-4b4b-8350-3a80f7c4c22f": {
                "size": {
                    "width": 150,
                    "height": 150
                },
                "position": {
                    "x": 940,
                    "y": 1610
                },
                "z": 2,
                "parent": "f98b2cb4-efa5-4af9-882e-359787f155a3",
                "embeds": []
            },
            "2afae0a4-d9b0-4272-a348-49de6a148357": {
                "source": {
                    "id": "e5d92f07-fc3b-4cfa-b32c-eaa8777b82c0"
                },
                "target": {
                    "id": "f98b2cb4-efa5-4af9-882e-359787f155a3"
                },
                "z": 4
            },
            "afed02df-e179-4438-811f-a7b52b64d541": {
                "source": {
                    "id": "6eb90a15-b424-480e-a700-1235a9e90c9c"
                },
                "target": {
                    "id": "f98b2cb4-efa5-4af9-882e-359787f155a3"
                },
                "z": 4
            },
            "b12109c5-a479-4714-aa6a-32bc60b4145b": {
                "size": {
                    "width": 60,
                    "height": 60
                },
                "position": {
                    "x": 190,
                    "y": 1490
                },
                "z": 0,
                "embeds": []
            },
            "e22095cb-d14f-4284-ab10-2423699c4c52": {
                "source": {
                    "id": "b12109c5-a479-4714-aa6a-32bc60b4145b"
                },
                "target": {
                    "id": "f98b2cb4-efa5-4af9-882e-359787f155a3"
                },
                "z": 0
            }
        }
    },
    "Parameters": {
        "SSHLocation": {
            "Description": "Lockdown SSH access to the bastion host (default can be accessed from anywhere)",
            "Type": "String",
            "MinLength": "9",
            "MaxLength": "18",
            "Default": "0.0.0.0/0",
            "AllowedPattern": "(\\d{1,3})\\.(\\d{1,3})\\.(\\d{1,3})\\.(\\d{1,3})/(\\d{1,2})",
            "ConstraintDescription": "must be a valid CIDR range of the form x.x.x.x/x."
        },
        "KeyName": {
            "Description": "Name of an existing EC2 KeyPair to enable SSH access to the instances",
            "Type": "AWS::EC2::KeyPair::KeyName",
            "ConstraintDescription": "must be the name of an existing EC2 KeyPair."
        },
        "InstanceType": {
            "Description": "WebServer EC2 instance type",
            "Type": "String",
            "Default": "t2.micro",
            "AllowedValues": [
                "t1.micro",
                "t2.nano",
                "t2.micro",
                "t2.small",
                "m1.small",
                "m3.medium",
                "c1.medium"
            ],
            "ConstraintDescription": "must be a valid EC2 instance type."
        }
    },
    "Mappings": {
        "AWSInstanceType2Arch": {
            "t2.micro": {
                "Arch": "HVM64"
            },
            "t2.small": {
                "Arch": "HVM64"
            },
            "t2.medium": {
                "Arch": "HVM64"
            },
            "m1.small": {
                "Arch": "PV64"
            },
            "m3.medium": {
                "Arch": "HVM64"
            }
        },
        "AWSRegionArch2AMI": {
            "us-east-1": {
                "PV64": "ami-2a69aa47",
                "HVM64": "ami-6869aa05",
                "HVMG2": "ami-c5eadcd3"
            },
            "us-west-2": {
                "PV64": "ami-7f77b31f",
                "HVM64": "ami-7172b611",
                "HVMG2": "ami-aaebfcd3"
            },
            "us-west-1": {
                "PV64": "ami-a2490dc2",
                "HVM64": "ami-31490d51",
                "HVMG2": "ami-68002c08"
            },
            "us-east-2": {
                "PV64": "NOT_SUPPORTED",
                "HVM64": "ami-f6035893",
                "HVMG2": "NOT_SUPPORTED"
            }
        }
    },
    "Resources": {
        "OurVPC": {
            "Type": "AWS::EC2::VPC",
            "Properties": {
                "CidrBlock": "10.0.0.0/16"
            },
            "Metadata": {
                "AWS::CloudFormation::Designer": {
                    "id": "f98b2cb4-efa5-4af9-882e-359787f155a3"
                }
            }
        },
        "OurSubnet": {
            "Type": "AWS::EC2::Subnet",
            "Properties": {
                "VpcId": {
                    "Ref": "OurVPC"
                },
                "CidrBlock": "10.0.1.0/24"
            },
            "Metadata": {
                "AWS::CloudFormation::Designer": {
                    "id": "9691a5d7-645a-4bb4-85d8-df7e8f3d4667"
                }
            }
        },
        "FTPASG": {
            "Type": "AWS::AutoScaling::AutoScalingGroup",
            "Properties": {
                "VPCZoneIdentifier": [
                    {
                        "Ref": "OurSubnet"
                    }
                ],
                "AvailabilityZones": [
                    "us-east-1a"
                ],
                "MinSize": "1",
                "MaxSize": "2",
                "LaunchConfigurationName": {
                    "Ref": "FTPLC"
                },
                "LoadBalancerNames": [
                    {
                        "Ref": "FTPELB"
                    }
                ]
            },
            "Metadata": {
                "AWS::CloudFormation::Designer": {
                    "id": "1548ec77-1f03-48dd-96d7-a2b435ae350f"
                }
            }
        },
        "FTPLC": {
            "Type": "AWS::AutoScaling::LaunchConfiguration",
            "Properties": {
                "ImageId": {
                    "Fn::FindInMap": [
                        "AWSRegionArch2AMI",
                        {
                            "Ref": "AWS::Region"
                        },
                        {
                            "Fn::FindInMap": [
                                "AWSInstanceType2Arch",
                                {
                                    "Ref": "InstanceType"
                                },
                                "Arch"
                            ]
                        }
                    ]
                },
                "KeyName": {
                    "Ref": "KeyName"
                },
                "InstanceType": {
                    "Ref": "InstanceType"
                }
            },
            "Metadata": {
                "AWS::CloudFormation::Designer": {
                    "id": "cca4257e-497b-4ef5-a4a9-64ae14a0e12d"
                }
            }
        },
        "LAMPASG": {
            "Type": "AWS::AutoScaling::AutoScalingGroup",
            "Properties": {
                "VPCZoneIdentifier": [
                    {
                        "Ref": "OurSubnet"
                    }
                ],
                "AvailabilityZones": [
                    "us-east-1a"
                ],
                "MinSize": "1",
                "MaxSize": "2",
                "LaunchConfigurationName": {
                    "Ref": "LAMPLC"
                },
                "LoadBalancerNames": [
                    {
                        "Ref": "LAMPELB"
                    }
                ]
            },
            "Metadata": {
                "AWS::CloudFormation::Designer": {
                    "id": "c48020e8-fb7b-4865-b954-14b433c480b7"
                }
            }
        },
        "LAMPLC": {
            "Type": "AWS::AutoScaling::LaunchConfiguration",
            "Properties": {
                "ImageId": {
                    "Fn::FindInMap": [
                        "AWSRegionArch2AMI",
                        {
                            "Ref": "AWS::Region"
                        },
                        {
                            "Fn::FindInMap": [
                                "AWSInstanceType2Arch",
                                {
                                    "Ref": "InstanceType"
                                },
                                "Arch"
                            ]
                        }
                    ]
                },
                "KeyName": {
                    "Ref": "KeyName"
                },
                "InstanceType": {
                    "Ref": "InstanceType"
                }
            },
            "Metadata": {
                "AWS::CloudFormation::Designer": {
                    "id": "40c46d66-28b2-48ec-843f-95737bcd6d1c"
                }
            }
        },
        "FTPELB": {
            "Type": "AWS::ElasticLoadBalancing::LoadBalancer",
            "Properties": {
                "Subnets": [
                    {
                        "Ref": "OurSubnet"
                    }
                ],
                "Listeners": [
                    {
                        "LoadBalancerPort": "80",
                        "InstancePort": "80",
                        "Protocol": "HTTP"
                    }
                ],
                "HealthCheck": {
                    "Target": "HTTP:80/",
                    "HealthyThreshold": "3",
                    "UnhealthyThreshold": "5",
                    "Interval": "30",
                    "Timeout": "5"
                }
            },
            "Metadata": {
                "AWS::CloudFormation::Designer": {
                    "id": "de1fad30-ae96-4261-b71e-0d5b1eec7e7a"
                }
            }
        },
        "LAMPELB": {
            "Type": "AWS::ElasticLoadBalancing::LoadBalancer",
            "Properties": {
                "Subnets": [
                    {
                        "Ref": "OurSubnet"
                    }
                ],
                "Listeners": [
                    {
                        "LoadBalancerPort": "80",
                        "InstancePort": "80",
                        "Protocol": "HTTP"
                    }
                ],
                "HealthCheck": {
                    "Target": "HTTP:80/",
                    "HealthyThreshold": "3",
                    "UnhealthyThreshold": "5",
                    "Interval": "30",
                    "Timeout": "5"
                }
            },
            "Metadata": {
                "AWS::CloudFormation::Designer": {
                    "id": "4918e21e-5c92-4a06-901c-57adc5788726"
                }
            }
        },
        "S3BHPID": {
            "Type": "AWS::S3::Bucket",
            "Properties": {
                "AccessControl": "PublicReadWrite",
                "CorsConfiguration": {
                    "CorsRules": [
                        {
                            "AllowedHeaders": [
                                "*"
                            ],
                            "AllowedMethods": [
                                "GET"
                            ],
                            "AllowedOrigins": [
                                "*"
                            ],
                            "ExposedHeaders": [
                                "Date"
                            ],
                            "Id": "myCORSRuleId1",
                            "MaxAge": "3600"
                        },
                        {
                            "AllowedHeaders": [
                                "x-amz-*"
                            ],
                            "AllowedMethods": [
                                "DELETE"
                            ],
                            "AllowedOrigins": [
                                "http://www.example1.com",
                                "http://www.example2.com"
                            ],
                            "ExposedHeaders": [
                                "Connection",
                                "Server",
                                "Date"
                            ],
                            "Id": "myCORSRuleId2",
                            "MaxAge": "1800"
                        }
                    ]
                }
            },
            "Metadata": {
                "AWS::CloudFormation::Designer": {
                    "id": "5c719f22-025f-4205-bcd8-ad4fa4950f7d"
                }
            }
        },
        "PubSubnetAz1": {
            "Type": "AWS::EC2::Subnet",
            "Properties": {
                "VpcId": {
                    "Ref": "OurVPC"
                },
                "CidrBlock": "10.0.4.0/24",
                "AvailabilityZone": "us-east-1d"
            },
            "Metadata": {
                "AWS::CloudFormation::Designer": {
                    "id": "92dc42b2-f272-4b4b-8350-3a80f7c4c22f"
                }
            }
        },
        "PubSubnetAz2": {
            "Type": "AWS::EC2::Subnet",
            "Properties": {
                "VpcId": {
                    "Ref": "OurVPC"
                },
                "CidrBlock": "10.0.3.0/24",
                "AvailabilityZone": "us-east-1a"
            },
            "Metadata": {
                "AWS::CloudFormation::Designer": {
                    "id": "efb6f2b9-dd3d-4e4c-bfe6-a4c2a799c2fa"
                }
            }
        },
        "DBSubnet": {
            "Type": "AWS::RDS::DBSubnetGroup",
            "Properties": {
                "SubnetIds": [
                    {
                        "Ref": "PubSubnetAz1"
                    },
                    {
                        "Ref": "PubSubnetAz2"
                    }
                ],
                "DBSubnetGroupDescription": "Aurora Subnet Group using subnets from 2 AZs"
            },
            "Metadata": {
                "AWS::CloudFormation::Designer": {
                    "id": "2cb6ece9-f72f-4532-b2a5-85a77e9c530f"
                }
            }
        },
        "MasterDB": {
            "Type": "AWS::RDS::DBInstance",
            "Properties": {
                "AllocatedStorage": "100",
                "DBInstanceClass": "db.m1.small",
                "Engine": "MySQL",
                "EngineVersion": "5.5",
                "Iops": "1000",
                "MasterUsername" : "test",
                "MasterUserPassword" : "test",
                "DBSubnetGroupName": {
                    "Ref": "DBSubnet"
                },
                "VPCSecurityGroups": [
                    {
                        "Ref": "MasterDBSG"
                    }
                ]
            },
            "Metadata": {
                "AWS::CloudFormation::Designer": {
                    "id": "fd4c10d1-0c09-43d5-a5d8-79ecb5371fb6"
                }
            }
        },
        "MasterDBSG": {
            "Type": "AWS::EC2::SecurityGroup",
            "Properties": {
                "GroupDescription": "Allow internal VPC connections",
                "SecurityGroupIngress": [
                    {
                        "IpProtocol": "tcp",
                        "FromPort": "0",
                        "ToPort": "65535",
                        "CidrIp": {
                            "Ref": "SSHLocation"
                        }
                    }
                ],
                "VpcId": {
                    "Ref": "OurVPC"
                }
            },
            "Metadata": {
                "AWS::CloudFormation::Designer": {
                    "id": "594a4af0-69dc-4101-bc58-3d0d4dc68a0b"
                }
            }
        },
        "OurNATGateway": {
            "Type": "AWS::EC2::NatGateway",
            "Properties": {
                "AllocationId": {
                    "Fn::GetAtt": [
                        "OurElasticIP",
                        "AllocationId"
                    ]
                },
                "SubnetId": {
                    "Ref": "OurSubnet"
                }
            },
            "Metadata": {
                "AWS::CloudFormation::Designer": {
                    "id": "8eb68b0e-fde1-4350-b64c-9ec350104125"
                }
            }
        },
        "OurElasticIP": {
            "Type": "AWS::EC2::EIP",
            "Properties": {
                "Domain": "vpc"
            },
            "Metadata": {
                "AWS::CloudFormation::Designer": {
                    "id": "e5d92f07-fc3b-4cfa-b32c-eaa8777b82c0"
                }
            },
            "DependsOn": [
                "OurVPC"
            ]
        },
        "OurRoute": {
            "Type": "AWS::EC2::Route",
            "Properties": {
                "RouteTableId": {
                    "Ref": "OurRouteTable"
                },
                "DestinationCidrBlock": "0.0.0.0/0",
                "NatGatewayId": {
                    "Ref": "OurNATGateway"
                }
            },
            "Metadata": {
                "AWS::CloudFormation::Designer": {
                    "id": "4b5fb1a9-1276-413d-b9b6-6375d435b3ae"
                }
            }
        },
        "OurRouteTable": {
            "Type": "AWS::EC2::RouteTable",
            "Properties": {
                "VpcId": {
                    "Ref": "OurVPC"
                }
            },
            "Metadata": {
                "AWS::CloudFormation::Designer": {
                    "id": "f5e3fefc-d6ba-47a2-abd3-44bb80885128"
                }
            }
        },
        "OurFileSystem": {
            "Type": "AWS::EFS::FileSystem",
            "Properties": {},
            "Metadata": {
                "AWS::CloudFormation::Designer": {
                    "id": "4734cb2b-fbbb-4d32-a4fe-27fbe3f6fe2d"
                }
            }
        },
        "OurIG": {
            "Type": "AWS::EC2::InternetGateway",
            "Properties": {},
            "Metadata": {
                "AWS::CloudFormation::Designer": {
                    "id": "b12109c5-a479-4714-aa6a-32bc60b4145b"
                }
            }
        },
        "EC2VPCG1QJPL": {
            "Type": "AWS::EC2::VPCGatewayAttachment",
            "Properties": {
                "InternetGatewayId": {
                    "Ref": "OurIG"
                },
                "VpcId": {
                    "Ref": "OurVPC"
                }
            },
            "Metadata": {
                "AWS::CloudFormation::Designer": {
                    "id": "e22095cb-d14f-4284-ab10-2423699c4c52"
                }
            }
        }
    }
}